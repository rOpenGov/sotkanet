<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sotkanetin avoimen rajapinnan R-työkalut • sotkanet</title>
<script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><link href="../deps/KaTex-0.16.10/katex.min.css" rel="stylesheet">
<script src="../deps/KaTex-0.16.10/katex.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sotkanetin avoimen rajapinnan R-työkalut">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=B612+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;family=Roboto+Mono:ital,wght@0,100..700;1,100..700&amp;display=swap" rel="stylesheet">
<!-- rogtemplate style sheet --><link href="../BS5/rogtemplate.min.css" rel="stylesheet">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sotkanet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.10.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/tutorial_fi.html">Sotkanetin avoimen rajapinnan R-työkalut</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial.html">Sotkanet API R tools</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rOpenGov/sotkanet/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<script src="tutorial_fi_files/kePrint-0.0.1/kePrint.js"></script><link href="tutorial_fi_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Sotkanetin avoimen rajapinnan R-työkalut</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rOpenGov/sotkanet/blob/v0.10.1/vignettes/articles/tutorial_fi.Rmd" class="external-link"><code>vignettes/articles/tutorial_fi.Rmd</code></a></small>
      <div class="d-none name"><code>tutorial_fi.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="paketin-esittely">Paketin esittely<a class="anchor" aria-label="anchor" href="#paketin-esittely"></a>
</h2>
<p>Sotkanetin avoin rajapinta mahdollistaa pääsyn yli kahteen tuhanteen
väestöindikaattoriin Suomesta ja Euroopasta. Palvelua ylläpitää
Terveyden ja hyvinvoinnin laitos (THL). Lisätietoa <a href="https://sotkanet.fi/sotkanet/fi/tietoa-palvelusta" class="external-link">palvelusta</a>
ja kuvaus <a href="https://sotkanet.fi/sotkanet/fi/ohje/74" class="external-link">avoimesta
rajapinnasta</a>.</p>
<p>Tämän <code>sotkanet</code> paketin käyttäjät pystyvät hakemaan
Sotkanetin dataa rajapinnasta suoraan R:ään ja hyödyntämään dataa
analyyseissa ja visualisoinneissa. Paketti on kehitetty osana <a href="https://ropengov.org" class="external-link">rOpenGov</a>-kehittäjäyhteisöä.</p>
</div>
<div class="section level2">
<h2 id="paketin-asennus">Paketin asennus<a class="anchor" aria-label="anchor" href="#paketin-asennus"></a>
</h2>
<p>Paketin vakaan, viimeisimmän CRANissa julkaistun version asentaminen
on useimmille käyttäjille suositeltavin vaihtoehto. Paketin uusimman
CRANissa julkaistun version voi asentaa komennolla:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"sotkanet"</span><span class="op">)</span></span></code></pre></div>
<p>Joissakin tapauksissa voi olla hyödyllistä asentaa paketin vanha
versio. CRAN ylläpitää jokaisesta CRANissa julkaistusta paketista
arkistoa, johon pääsee esimerkiksi <a href="https://cran.r-project.org/package=sotkanet" class="external-link">sotkanet-paketin
CRAN-sivulla</a> klikkaamalla Old sources: sotkanet archive
-linkkiä.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"https://cran.r-project.org/src/contrib/Archive/sotkanet/sotkanet_0.9.76.tar.gz"</span>, repos<span class="op">=</span><span class="cn">NULL</span>, type<span class="op">=</span><span class="st">"source"</span><span class="op">)</span></span></code></pre></div>
<p>Paketin kehitysversion voi asentaa GitHubista seuraavilla
tavoilla:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ropengov/sotkanet"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Tietyn git branchin, tässä tapauksessa 'v0.10-dev' -nimisen branchin version asentaminen</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ropengov/sotkanet@v0.10-dev"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Tietyn pull requestin, tässä tapauksessa PR 26 "Add check for region.code length" mukaisen version asentaminen</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ropengov/sotkanet"</span>, ref <span class="op">=</span> <span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/github_refs.html" class="external-link">github_pull</a></span><span class="op">(</span><span class="st">"26"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"ropengov/sotkanet#26"</span><span class="op">)</span></span></code></pre></div>
<p><code>remotes</code>-paketin käyttäminen vaatii Githubin Personal
Access Tokenin (PAT) määrittelyn. Ohjeita tähän löytyy esimerkiksi
<code>usethis</code>-paketin <a href="https://usethis.r-lib.org/articles/git-credentials.html#what-about-the-remotes-and-pak-packages" class="external-link">artikkelista</a>.</p>
<p>Asennuksen onnistumista voi testata lataamalla paketin:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ropengov.github.io/sotkanet/">sotkanet</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="paketin-käyttö">Paketin käyttö<a class="anchor" aria-label="anchor" href="#paketin-k%C3%A4ytt%C3%B6"></a>
</h2>
<div class="section level3">
<h3 id="käytettävissä-olevat-indikaattorit-ja-aluejaot">Käytettävissä olevat indikaattorit ja aluejaot<a class="anchor" aria-label="anchor" href="#k%C3%A4ytett%C3%A4viss%C3%A4-olevat-indikaattorit-ja-aluejaot"></a>
</h3>
<p>Aloitetaan lataamalla tarvittavat paketit:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ropengov.github.io/sotkanet/">sotkanet</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>Käytettävissä olevat indikaattorit voi listata käyttämällä funktiota
<code><a href="../reference/sotkanet_indicators.html">sotkanet_indicators()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ladataan muutama esimerkki-indikaattori</span></span>
<span><span class="va">indicators</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sotkanet_indicators.html">sotkanet_indicators</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">127</span>, <span class="fl">10012</span>, <span class="fl">10027</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span>
<span><span class="co"># Visualisoidaan taulukkomuodossa</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">indicators</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="5%">
<col width="56%">
<col width="12%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="right">indicator</th>
<th align="left">indicator.title</th>
<th align="right">indicator.organization</th>
<th align="left">indicator.organization.title</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">4</td>
<td align="left">Mielenterveyden häiriöihin sairaalahoitoa saaneet 0 -
17-vuotiaat / 1 000 vastaavan ikäistä</td>
<td align="right">2</td>
<td align="left">Terveyden ja hyvinvoinnin laitos (THL)</td>
</tr>
<tr class="even">
<td align="right">5</td>
<td align="left">Toimeentulotukea saaneet 25 - 64-vuotiaat, % vastaavan
ikäisestä väestöstä</td>
<td align="right">2</td>
<td align="left">Terveyden ja hyvinvoinnin laitos (THL)</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="left">Somaattisen erikoissairaanhoidon vuodeosastohoitopäivät
75 vuotta täyttäneillä / 1 000 vastaavan ikäistä</td>
<td align="right">2</td>
<td align="left">Terveyden ja hyvinvoinnin laitos (THL)</td>
</tr>
<tr class="even">
<td align="right">127</td>
<td align="left">Väestö 31.12.</td>
<td align="right">3</td>
<td align="left">Tilastokeskus</td>
</tr>
<tr class="odd">
<td align="right">10012</td>
<td align="left">(EU) Bruttokansantuote (BKT) asukasta kohden
ostovoimapariteetin mukaan</td>
<td align="right">58</td>
<td align="left">Euroopan yhteisöjen tilastotoimisto (Eurostat)</td>
</tr>
<tr class="even">
<td align="right">10027</td>
<td align="left">(EU) Vakioitu itsemurhakuolleisuus / 100 000
asukasta</td>
<td align="right">58</td>
<td align="left">Euroopan yhteisöjen tilastotoimisto (Eurostat)</td>
</tr>
</tbody>
</table>
<p>Kuten listauksesta voidaan huomata, Sotkanet APIsta löytyy THL:n
omien indikaattoreiden lisäksi myös monien muiden viranomaisten,
esimerkiksi Kansaneläkelaitoksen ja Tilastokeskuksen, tuottamia
indikaattoreita. Käyttäjän on syytä olla huolellinen viitatessaan
dataan.</p>
<p>Maantieteelliset alueet voi listata käyttämällä funktiota
<code><a href="../reference/sotkanet_regions.html">sotkanet_regions()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ladataan kaikki sotkanetin käyttämät alueet</span></span>
<span><span class="va">regions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sotkanet_regions.html">sotkanet_regions</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"table"</span><span class="op">)</span></span>
<span><span class="co"># Visualisoidaan kuusi ensimmäistä aluetta taulukkomuodossa</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">regions</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="6%">
<col width="30%">
<col width="11%">
<col width="18%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th align="right">region</th>
<th align="left">region.title</th>
<th align="left">region.code</th>
<th align="left">region.category</th>
<th align="left">region.uri</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">833</td>
<td align="left">Etelä-Suomen AVIn alue</td>
<td align="left">1</td>
<td align="left">ALUEHALLINTOVIRASTO</td>
<td align="left"><a href="http://www.yso.fi/onto/kunnat/ahv1" class="external-link uri">http://www.yso.fi/onto/kunnat/ahv1</a></td>
</tr>
<tr class="even">
<td align="right">834</td>
<td align="left">Lounais-Suomen AVIn alue</td>
<td align="left">2</td>
<td align="left">ALUEHALLINTOVIRASTO</td>
<td align="left"><a href="http://www.yso.fi/onto/kunnat/ahv2" class="external-link uri">http://www.yso.fi/onto/kunnat/ahv2</a></td>
</tr>
<tr class="odd">
<td align="right">835</td>
<td align="left">Itä-Suomen AVIn alue</td>
<td align="left">3</td>
<td align="left">ALUEHALLINTOVIRASTO</td>
<td align="left"><a href="http://www.yso.fi/onto/kunnat/ahv3" class="external-link uri">http://www.yso.fi/onto/kunnat/ahv3</a></td>
</tr>
<tr class="even">
<td align="right">836</td>
<td align="left">Länsi- ja Sisä-Suomen AVIn alue</td>
<td align="left">4</td>
<td align="left">ALUEHALLINTOVIRASTO</td>
<td align="left"><a href="http://www.yso.fi/onto/kunnat/ahv4" class="external-link uri">http://www.yso.fi/onto/kunnat/ahv4</a></td>
</tr>
<tr class="odd">
<td align="right">837</td>
<td align="left">Pohjois-Suomen AVIn alue</td>
<td align="left">5</td>
<td align="left">ALUEHALLINTOVIRASTO</td>
<td align="left"><a href="http://www.yso.fi/onto/kunnat/ahv5" class="external-link uri">http://www.yso.fi/onto/kunnat/ahv5</a></td>
</tr>
<tr class="even">
<td align="right">838</td>
<td align="left">Lapin AVIn alue</td>
<td align="left">6</td>
<td align="left">ALUEHALLINTOVIRASTO</td>
<td align="left"><a href="http://www.yso.fi/onto/kunnat/ahv6" class="external-link uri">http://www.yso.fi/onto/kunnat/ahv6</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="sotkanet-datan-lataaminen">Sotkanet datan lataaminen<a class="anchor" aria-label="anchor" href="#sotkanet-datan-lataaminen"></a>
</h3>
<p>Datan lataamiseksi tarvitaan indikaattorin tunniste. Oikean
indikaattorin hakemiseen voi käyttää edellä mainittua
<code>sotkanet_indicators</code> funktiota, indikaattorin lataamisessa
käytetään <code>indicator</code>-sarakkeesta löytyvää numeerista
tunnistetta. Indikaattorin etsimiseen voi käyttää myös <a href="https://sotkanet.fi/sotkanet/fi/index" class="external-link">Sotkanetin
nettisivuja</a>.</p>
<p>Esimerkiksi indikaattoritunniste 5 vastaa “Toimeentulotukea saaneet
25 - 64-vuotiaat, % vastaavan ikäisestä väestöstä” -datasettiä. Datan
voi ladata käyttämllä <code><a href="../reference/get_sotkanet.html">get_sotkanet()</a></code> funktiota. Datasetin
hyvinvointialueittaisen datan vuosilta 2000-2010 saa komennolla:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Indikaattorin datan hakeminen</span></span>
<span><span class="va">dat_5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sotkanet.html">get_sotkanet</a></span><span class="op">(</span>indicators <span class="op">=</span> <span class="fl">5</span>, years <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2010</span>,</span>
<span>                    genders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"total"</span><span class="op">)</span>, region.category <span class="op">=</span> <span class="st">"HYVINVOINTIALUE"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Datan kuusi ensimmäistä riviä</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat_5</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html" class="external-link">scroll_box</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
indicator
</th>
<th style="text-align:right;">
region
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:left;">
gender
</th>
<th style="text-align:right;">
primary.value
</th>
<th style="text-align:right;">
absolute.value
</th>
<th style="text-align:left;">
indicator.title
</th>
<th style="text-align:left;">
region.title
</th>
<th style="text-align:left;">
region.code
</th>
<th style="text-align:left;">
region.category
</th>
<th style="text-align:left;">
indicator.organization.title
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
966
</td>
<td style="text-align:right;">
2003
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
5.8
</td>
<td style="text-align:right;">
5636
</td>
<td style="text-align:left;">
Toimeentulotukea saaneet 25 - 64-vuotiaat, % vastaavan ikäisestä
väestöstä
</td>
<td style="text-align:left;">
Keski-Uudenmaan hyvinvointialue
</td>
<td style="text-align:left;">
02
</td>
<td style="text-align:left;">
HYVINVOINTIALUE
</td>
<td style="text-align:left;">
Terveyden ja hyvinvoinnin laitos (THL)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
975
</td>
<td style="text-align:right;">
2007
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:right;">
7434
</td>
<td style="text-align:left;">
Toimeentulotukea saaneet 25 - 64-vuotiaat, % vastaavan ikäisestä
väestöstä
</td>
<td style="text-align:left;">
Päijät-Hämeen hyvinvointialue
</td>
<td style="text-align:left;">
09
</td>
<td style="text-align:left;">
HYVINVOINTIALUE
</td>
<td style="text-align:left;">
Terveyden ja hyvinvoinnin laitos (THL)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
964
</td>
<td style="text-align:right;">
2008
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:right;">
1674
</td>
<td style="text-align:left;">
Toimeentulotukea saaneet 25 - 64-vuotiaat, % vastaavan ikäisestä
väestöstä
</td>
<td style="text-align:left;">
Keski-Pohjanmaan hyvinvointialue
</td>
<td style="text-align:left;">
18
</td>
<td style="text-align:left;">
HYVINVOINTIALUE
</td>
<td style="text-align:left;">
Terveyden ja hyvinvoinnin laitos (THL)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
977
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
8.7
</td>
<td style="text-align:right;">
10789
</td>
<td style="text-align:left;">
Toimeentulotukea saaneet 25 - 64-vuotiaat, % vastaavan ikäisestä
väestöstä
</td>
<td style="text-align:left;">
Vantaan ja Keravan hyvinvointialue
</td>
<td style="text-align:left;">
04
</td>
<td style="text-align:left;">
HYVINVOINTIALUE
</td>
<td style="text-align:left;">
Terveyden ja hyvinvoinnin laitos (THL)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
963
</td>
<td style="text-align:right;">
2010
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:right;">
5598
</td>
<td style="text-align:left;">
Toimeentulotukea saaneet 25 - 64-vuotiaat, % vastaavan ikäisestä
väestöstä
</td>
<td style="text-align:left;">
Kanta-Hämeen hyvinvointialue
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:left;">
HYVINVOINTIALUE
</td>
<td style="text-align:left;">
Terveyden ja hyvinvoinnin laitos (THL)
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
972
</td>
<td style="text-align:right;">
2005
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:right;">
8330
</td>
<td style="text-align:left;">
Toimeentulotukea saaneet 25 - 64-vuotiaat, % vastaavan ikäisestä
väestöstä
</td>
<td style="text-align:left;">
Pohjois-Karjalan hyvinvointialue
</td>
<td style="text-align:left;">
14
</td>
<td style="text-align:left;">
HYVINVOINTIALUE
</td>
<td style="text-align:left;">
Terveyden ja hyvinvoinnin laitos (THL)
</td>
</tr>
</tbody>
</table>
</div>
<p>Sotkanet APIsta löytyy myös monien muiden viranomaisten, esimerkiksi
Kansaneläkelaitoksen ja Tilastokeskuksen, tuottamia indikaattoreita.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Indikaattorin datan hakeminen</span></span>
<span><span class="va">dat_3090</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sotkanet.html">get_sotkanet</a></span><span class="op">(</span>indicators <span class="op">=</span> <span class="fl">3090</span>, years <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2021</span>,</span>
<span>                    genders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"total"</span><span class="op">)</span>, region.category <span class="op">=</span> <span class="st">"MAAKUNTA"</span>,</span>
<span>                    regions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Uusimaa"</span>, <span class="st">"Varsinais-Suomi"</span>, <span class="st">"Satakunta"</span>, <span class="st">"Päijät-Häme"</span>, <span class="st">"Lappi"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat_3090_meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sotkanet_indicator_metadata.html">sotkanet_indicator_metadata</a></span><span class="op">(</span><span class="fl">3090</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Datan kuusi ensimmäistä riviä</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat_3090</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/scroll_box.html" class="external-link">scroll_box</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
indicator
</th>
<th style="text-align:right;">
region
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:left;">
gender
</th>
<th style="text-align:right;">
primary.value
</th>
<th style="text-align:right;">
absolute.value
</th>
<th style="text-align:left;">
indicator.title
</th>
<th style="text-align:left;">
region.title
</th>
<th style="text-align:left;">
region.code
</th>
<th style="text-align:left;">
region.category
</th>
<th style="text-align:left;">
indicator.organization.title
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
3090
</td>
<td style="text-align:right;">
493
</td>
<td style="text-align:right;">
2005
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
</td>
<td style="text-align:left;">
Päijät-Häme
</td>
<td style="text-align:left;">
07
</td>
<td style="text-align:left;">
MAAKUNTA
</td>
<td style="text-align:left;">
Tilastokeskus
</td>
</tr>
<tr>
<td style="text-align:right;">
3090
</td>
<td style="text-align:right;">
490
</td>
<td style="text-align:right;">
2012
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:left;">
Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
</td>
<td style="text-align:left;">
Satakunta
</td>
<td style="text-align:left;">
04
</td>
<td style="text-align:left;">
MAAKUNTA
</td>
<td style="text-align:left;">
Tilastokeskus
</td>
</tr>
<tr>
<td style="text-align:right;">
3090
</td>
<td style="text-align:right;">
505
</td>
<td style="text-align:right;">
2021
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:left;">
Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
</td>
<td style="text-align:left;">
Lappi
</td>
<td style="text-align:left;">
19
</td>
<td style="text-align:left;">
MAAKUNTA
</td>
<td style="text-align:left;">
Tilastokeskus
</td>
</tr>
<tr>
<td style="text-align:right;">
3090
</td>
<td style="text-align:right;">
490
</td>
<td style="text-align:right;">
2021
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
</td>
<td style="text-align:left;">
Satakunta
</td>
<td style="text-align:left;">
04
</td>
<td style="text-align:left;">
MAAKUNTA
</td>
<td style="text-align:left;">
Tilastokeskus
</td>
</tr>
<tr>
<td style="text-align:right;">
3090
</td>
<td style="text-align:right;">
488
</td>
<td style="text-align:right;">
2006
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:right;">
330
</td>
<td style="text-align:left;">
Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
</td>
<td style="text-align:left;">
Uusimaa
</td>
<td style="text-align:left;">
01
</td>
<td style="text-align:left;">
MAAKUNTA
</td>
<td style="text-align:left;">
Tilastokeskus
</td>
</tr>
<tr>
<td style="text-align:right;">
3090
</td>
<td style="text-align:right;">
488
</td>
<td style="text-align:right;">
2020
</td>
<td style="text-align:left;">
total
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
782
</td>
<td style="text-align:left;">
Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
</td>
<td style="text-align:left;">
Uusimaa
</td>
<td style="text-align:left;">
01
</td>
<td style="text-align:left;">
MAAKUNTA
</td>
<td style="text-align:left;">
Tilastokeskus
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">dat_3090</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">absolute.value</span>, color <span class="op">=</span> <span class="va">region.title</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Vuosi"</span>, y <span class="op">=</span> <span class="st">"n"</span>, title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">dat_3090_meta</span><span class="op">$</span><span class="va">title</span><span class="op">$</span><span class="va">fi</span>, <span class="st">"\n(absoluuttiset arvot)"</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"Maakunta"</span>,</span>
<span>          caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"Datan lähde: https://sotkanet.fi / "</span>, <span class="va">dat_3090_meta</span><span class="op">$</span><span class="va">organization</span><span class="op">$</span><span class="va">title</span><span class="op">$</span><span class="va">fi</span>, <span class="st">"\n"</span>, <span class="st">"Datan päiväys: "</span>, <span class="va">dat_3090_meta</span><span class="op">$</span><span class="va">`data-updated`</span>, <span class="st">", Data ladattu: "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_fi_files/figure-html/get_sotkanet_maakunta-1.png" width="700">
### Datan hakeminen interaktiivisella funktiolla</p>
<p>Datan hakemiseen voi myös käyttää interaktiivista
<code><a href="../reference/sotkanet_interactive.html">sotkanet_interactive()</a></code> funktiota, joka tarjoaa käyttäjälle
interaktiivisen ja helppokäyttöisen vaihtoehdon datan lataamiselle.
Interaktiivisen funktion tarkoituksena on paitsi helpottaa datan
hakemista, myös edistää hyviä käytäntöjä, kuten datalähteisiin
viittaaminen, datan latausskriptin tallentaminen ja taulukolle lasketun
tarkistussumman laskeminen.</p>
<p>Datan interaktiivinen hakeminen näyttää pääpiirteissään
seuraavanlaiselta:</p>
<pre><code>&gt; sotkanet_interactive()
Select language 

1: Finnish
2: English
3: Swedish

Selection: 1
Enter search id for the data: 3090
Is this the right dataset? 

1: Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
2: No

Selection: 1
Download the dataset? 

1: Yes
2: No

Selection: 1
Would you like to use default arguments or manually select them? 

1: Default
2: Manually selected

Selection: 2
Enter the beginning year for the data: 2000
Enter the ending year for the data: 2005
Which genders do you want for the data? 

1: Male
2: Female
3: Male &amp; Female
4: Total
5: All

Selection: 4
Print dataset citation? 

1: Yes
2: No

Selection: 1
Print the code for downloading dataset? 

1: Yes
2: No

Selection: 1
Print dataset fixity checksum? 

1: Yes
2: No

Selection: 1
#### DATASET CITATION: 

@Misc{,
  title = {Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta},
  url = {https://sotkanet.fi/sotkanet/fi/metadata/indicators/3090},
  organization = {Tilastokeskus},
  year = {2024},
  urldate = {2024-06-24},
  type = {Dataset},
  note = {Accessed 2024-06-24, dataset last updated 2024-05-22},
}

#### DOWNLOAD PARAMETERS: 

[1] "get_sotkanet(indicators = 3090, years = 2000:2005, genders = c('total'), regions = NULL, region.category = NULL, lang = 'fi')"

#### FIXITY CHECKSUM: 

[1] "Fixity checksum (md5) for dataset 3090: 7c13cceb2b63d77685cec243ba3e7a13"

   indicator region year gender primary.value absolute.value                                                       indicator.title
1       3090    966 2003  total           0.2             41 Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
2       3090    838 2005  total           0.1             10 Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
3       3090    611 2004  total           0.0             12 Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
4       3090    242 2000  total           0.3              5 Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
5       3090    161 2002  total           0.1             10 Poliisin tietoon tulleet törkeät huumausainerikokset / 1 000 asukasta
[...]</code></pre>
<p>Tarkempien rajauksien tekeminen indikaattoreihin saattaa johtaa
seuraavanlaiseen varoitusviestiin:</p>
<pre><code>Warning message:
In get_sotkanet(indicators = search_id, years = years, genders = gender_selection,  :
  The data.frame is empty</code></pre>
<p>Viesti johtuu usein siitä, että valitussa indikaattorissa ei ole
esimerkiksi dataa valitulta aikaväliltä, tiettyä haluttua aluetta tai
dataa tietyiltä sukupuoliryhmiltä. Varoitusviestin voi välttää
useimmissa tapauksissa lataamalla kaiken datan (‘default arguments’) eli
jättämällä manuaaliset rajaukset tekemättä datan lataamisvaiheessa.
Dataa voi suodattaa lataamisen jälkeen omalla koneella.</p>
</div>
</div>
<div class="section level2">
<h2 id="dataan-viittaaminen">Dataan viittaaminen<a class="anchor" aria-label="anchor" href="#dataan-viittaaminen"></a>
</h2>
<p>Mille tahansa indikaattorille voi tulostaa viitteen käyttämällä
<code><a href="../reference/sotkanet_cite.html">sotkanet_cite()</a></code> funktiota. Esimerkiksi edellä käytetyn
toimeentulotukidatan viitauksen printtaaminen onnistuu helposti
komennolla:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sotkanet_cite.html">sotkanet_cite</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="co">#&gt; @Misc{,</span></span>
<span><span class="co">#&gt;   title = {Toimeentulotukea saaneet 25 - 64-vuotiaat, % vastaavan ikäisestä väestöstä},</span></span>
<span><span class="co">#&gt;   url = {https://sotkanet.fi/sotkanet/fi/metadata/indicators/5},</span></span>
<span><span class="co">#&gt;   organization = {Terveyden ja hyvinvoinnin laitos (THL)},</span></span>
<span><span class="co">#&gt;   year = {2024},</span></span>
<span><span class="co">#&gt;   urldate = {2024-07-15},</span></span>
<span><span class="co">#&gt;   type = {Dataset},</span></span>
<span><span class="co">#&gt;   note = {Accessed 2024-07-15, dataset last updated 2024-05-08},</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p><code>sotkanet_cite</code> funktio mahdollistaa dataviittausten
helpon luomisen muillakin myös muilla rajapinnan tukemilla kielillä:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sotkanet_cite.html">sotkanet_cite</a></span><span class="op">(</span><span class="fl">5</span>, lang <span class="op">=</span> <span class="st">"sv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; @Misc{,</span></span>
<span><span class="co">#&gt;   title = {25 - 64-åriga mottagare av utkomststöd, % av befolkningen i samma ålder},</span></span>
<span><span class="co">#&gt;   url = {https://sotkanet.fi/sotkanet/sv/metadata/indicators/5},</span></span>
<span><span class="co">#&gt;   organization = {Institutet för hälsa och välfärd (THL)},</span></span>
<span><span class="co">#&gt;   year = {2024},</span></span>
<span><span class="co">#&gt;   urldate = {2024-07-15},</span></span>
<span><span class="co">#&gt;   type = {Dataset},</span></span>
<span><span class="co">#&gt;   note = {Accessed 2024-07-15, dataset last updated 2024-05-08},</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="fu"><a href="../reference/sotkanet_cite.html">sotkanet_cite</a></span><span class="op">(</span><span class="fl">5</span>, lang <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span></span>
<span><span class="co">#&gt; @Misc{,</span></span>
<span><span class="co">#&gt;   title = {Social assistance recipients aged 25-64, as % of total population of same age},</span></span>
<span><span class="co">#&gt;   url = {https://sotkanet.fi/sotkanet/en/metadata/indicators/5},</span></span>
<span><span class="co">#&gt;   organization = {Finnish institute for Health and Welfare (THL)},</span></span>
<span><span class="co">#&gt;   year = {2024},</span></span>
<span><span class="co">#&gt;   urldate = {2024-07-15},</span></span>
<span><span class="co">#&gt;   type = {Dataset},</span></span>
<span><span class="co">#&gt;   note = {Accessed 2024-07-15, dataset last updated 2024-05-08},</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="esimerkkejä">Esimerkkejä<a class="anchor" aria-label="anchor" href="#esimerkkej%C3%A4"></a>
</h2>
<p>Käydään seuraavaksi läpi paketin käyttöä kolmen esimerkin avulla.</p>
<div class="section level3">
<h3 id="pohjoismaiden-väliset-erot">Pohjoismaiden väliset erot<a class="anchor" aria-label="anchor" href="#pohjoismaiden-v%C3%A4liset-erot"></a>
</h3>
<p>Ensimmäisessä esimerkissä verrataan pohjoismaiden välisiä eroja
Eurostatin tuottamassa BKT-datassa vuosina 2000-2010.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Indikaattorin datan hakeminen</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sotkanet.html">get_sotkanet</a></span><span class="op">(</span>indicators <span class="op">=</span> <span class="fl">10012</span>, years <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2010</span>,</span>
<span>                    genders <span class="op">=</span> <span class="st">"total"</span>, region.category <span class="op">=</span> <span class="st">"POHJOISMAAT"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">indicator_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">indicator.title</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">indicator_source</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">indicator.organization.title</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Metadatan hakeminen</span></span>
<span><span class="va">dat_meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sotkanet_indicator_metadata.html">sotkanet_indicator_metadata</a></span><span class="op">(</span><span class="fl">10012</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualisointi</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">primary.value</span>,</span>
<span>                     group <span class="op">=</span> <span class="va">region.title</span>, color <span class="op">=</span> <span class="va">region.title</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">indicator_name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Vuosi"</span>, y <span class="op">=</span> <span class="st">"Arvo"</span>, color <span class="op">=</span> <span class="st">"Maa"</span>, caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"Datan lähde: https://sotkanet.fi / "</span>, <span class="va">indicator_source</span>, <span class="st">"\n"</span>, <span class="st">"Datan päiväys: "</span>, <span class="va">dat_meta</span><span class="op">$</span><span class="va">`data-updated`</span>, <span class="st">", Data ladattu: "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">2000</span>,<span class="fl">2010</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_fi_files/figure-html/sotkanet_nordic_gdp-1.png" width="100%"></p>
<p>Dataviittaus indikaattorille 10012:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sotkanet_cite.html">sotkanet_cite</a></span><span class="op">(</span><span class="fl">10012</span><span class="op">)</span></span>
<span><span class="co">#&gt; @Misc{,</span></span>
<span><span class="co">#&gt;   title = {(EU) Bruttokansantuote (BKT) asukasta kohden ostovoimapariteetin mukaan},</span></span>
<span><span class="co">#&gt;   url = {https://sotkanet.fi/sotkanet/fi/metadata/indicators/10012},</span></span>
<span><span class="co">#&gt;   organization = {Euroopan yhteisöjen tilastotoimisto (Eurostat)},</span></span>
<span><span class="co">#&gt;   year = {2017},</span></span>
<span><span class="co">#&gt;   urldate = {2024-07-15},</span></span>
<span><span class="co">#&gt;   type = {Dataset},</span></span>
<span><span class="co">#&gt;   note = {Accessed 2024-07-15, dataset last updated 2017-10-24},</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="suomen-kuntien-väkiluvun-yhteys-koulutustasomittarin-arvoon">Suomen kuntien väkiluvun yhteys koulutustasomittarin arvoon<a class="anchor" aria-label="anchor" href="#suomen-kuntien-v%C3%A4kiluvun-yhteys-koulutustasomittarin-arvoon"></a>
</h3>
<p>Toisessa esimerkissä tarkastellaan Suomen kuntien väkiluvun yhteyttä
kunnan koulutustasomittarin arvoon.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Datan hakeminen indikaattoreille</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sotkanet.html">get_sotkanet</a></span><span class="op">(</span>indicators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">127</span>, <span class="fl">180</span><span class="op">)</span>, </span>
<span>                    years <span class="op">=</span> <span class="fl">2022</span>, genders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"total"</span><span class="op">)</span>, region.category <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"KUNTA"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Valitaan mielenkiinnon kohteena olevat sarakkeet ja poistetaan päällekkäisyydet</span></span>
<span><span class="va">datf</span> <span class="op">&lt;-</span> <span class="va">dat</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region.title"</span>, <span class="st">"indicator.title"</span>, <span class="st">"primary.value"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">datf</span> <span class="op">&lt;-</span> <span class="va">datf</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">datf</span><span class="op">)</span>,<span class="op">]</span></span>
<span><span class="va">dw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/reshape.html" class="external-link">reshape</a></span><span class="op">(</span><span class="va">datf</span>, idvar <span class="op">=</span> <span class="st">"region.title"</span>,</span>
<span>              timevar <span class="op">=</span> <span class="st">"indicator.title"</span>, direction <span class="op">=</span> <span class="st">"wide"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dw</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Municipality"</span>, <span class="st">"Population"</span>, <span class="st">"Education_level"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Visualisointi</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">dw</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">Population</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">Education_level</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Koulutustasomittari vs. väkiluku"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"log(Väkiluku)"</span>, y <span class="op">=</span> <span class="st">"Koulutustasomittari"</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Lähde: https://sotkanet.fi"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">15</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_fi_files/figure-html/sotkanet_pop_educ-1.png" width="100%"></p>
<p>Dataviittaukset indikaattoreille 127 ja 180:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sotkanet_cite.html">sotkanet_cite</a></span><span class="op">(</span><span class="fl">127</span><span class="op">)</span></span>
<span><span class="co">#&gt; @Misc{,</span></span>
<span><span class="co">#&gt;   title = {Väestö 31.12.},</span></span>
<span><span class="co">#&gt;   url = {https://sotkanet.fi/sotkanet/fi/metadata/indicators/127},</span></span>
<span><span class="co">#&gt;   organization = {Tilastokeskus},</span></span>
<span><span class="co">#&gt;   year = {2024},</span></span>
<span><span class="co">#&gt;   urldate = {2024-07-15},</span></span>
<span><span class="co">#&gt;   type = {Dataset},</span></span>
<span><span class="co">#&gt;   note = {Accessed 2024-07-15, dataset last updated 2024-04-26},</span></span>
<span><span class="co">#&gt; }</span></span>
<span></span>
<span><span class="fu"><a href="../reference/sotkanet_cite.html">sotkanet_cite</a></span><span class="op">(</span><span class="fl">180</span><span class="op">)</span></span>
<span><span class="co">#&gt; @Misc{,</span></span>
<span><span class="co">#&gt;   title = {Koulutustasomittain},</span></span>
<span><span class="co">#&gt;   url = {https://sotkanet.fi/sotkanet/fi/metadata/indicators/180},</span></span>
<span><span class="co">#&gt;   organization = {Tilastokeskus},</span></span>
<span><span class="co">#&gt;   year = {2023},</span></span>
<span><span class="co">#&gt;   urldate = {2024-07-15},</span></span>
<span><span class="co">#&gt;   type = {Dataset},</span></span>
<span><span class="co">#&gt;   note = {Accessed 2024-07-15, dataset last updated 2023-10-11},</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="infektioiden-määrä-maakunnittain">Infektioiden määrä maakunnittain<a class="anchor" aria-label="anchor" href="#infektioiden-m%C3%A4%C3%A4r%C3%A4-maakunnittain"></a>
</h3>
<p>Lopuksi demonstroimme sotkanet-datan lataamista ja visualisoimista
kartalle, tässä tapauksessa maakunnittain. Tilastokeskuksen tarjoamien
kartta-aineistojen lataamiseen käytämme toista rOpenGov-pakettia,
<code>geofi</code>-pakettia.</p>
<p>Ns. teemakarttojen tapauksessa on hyvä muistaa visualisointitavan
rajoitteet: Pinta-alaltaan suuret ja mahdollisesti harvaan asutut alueet
saattavat ylikorostua kun taas pienet ja tiheästi asutut alueet
saattavat olla vaikeasti tulkittavia. Pidemmän ajan aikasarjojen
visualisointi teemakarttamuodossa on hieman väkinäinen ratkaisu, eikä
alla olevan esimerkin mukainen keskiarvojen laskeminen ole aina
välttämättä kovin mielekästä. Karttavisualisoinneilla on kuitenkin myös
hyvät puolensa, kuten niiden luomisen helppous ja kohtalaisen helppo
tulkittavuus, joten niitä ei tule myöskään väheksyä.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ropengov.github.io/geofi/" class="external-link">geofi</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:kableExtra':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     group_rows</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="co"># codes_as_characters = TRUE tarvitaan jotta aluekoodit palautetaan</span></span>
<span><span class="co"># tekstimuodossa (esim. "01") eikä kokonaislukuina (esim. 1)</span></span>
<span><span class="va">polygon</span> <span class="op">&lt;-</span> <span class="fu">geofi</span><span class="fu">::</span><span class="fu"><a href="https://ropengov.github.io/geofi/reference/get_municipality_pop.html" class="external-link">get_municipality_pop</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2021</span>, codes_as_character <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Requesting response from: http://geo.stat.fi/geoserver/wfs?service=WFS&amp;version=1.0.0&amp;request=getFeature&amp;typename=vaestoalue%3Akunta_vaki2021</span></span>
<span><span class="co">#&gt; Warning: Coercing CRS to epsg:3067 (ETRS89 / TM35FIN)</span></span>
<span><span class="co">#&gt; Data is licensed under: Attribution 4.0 International (CC BY 4.0)</span></span>
<span></span>
<span><span class="co"># Yhdistetään kunta-polygonit maakunta-polygoneiksi</span></span>
<span><span class="va">regions</span> <span class="op">&lt;-</span> <span class="va">polygon</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">maakunta_name_fi</span>, <span class="va">maakunta_code</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>vaesto <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">vaesto</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'maakunta_name_fi'. You can override using</span></span>
<span><span class="co">#&gt; the `.groups` argument.</span></span>
<span></span>
<span><span class="co"># Indikaattorin datan hakeminen</span></span>
<span><span class="va">dat_3165</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_sotkanet.html">get_sotkanet</a></span><span class="op">(</span>indicators <span class="op">=</span> <span class="fl">3165</span>, years <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2021</span>,</span>
<span>                    genders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"total"</span><span class="op">)</span>, region.category <span class="op">=</span> <span class="st">"MAAKUNTA"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Lasketaan uusi muuttuja, tapausten lukumäärän keskiarvo koko ajanjakson ajalta</span></span>
<span><span class="va">dat_3165_mean</span> <span class="op">&lt;-</span> <span class="va">dat_3165</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">region.code</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>mean_cases_per_annum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">primary.value</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dat_3165_meta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sotkanet_indicator_metadata.html">sotkanet_indicator_metadata</a></span><span class="op">(</span><span class="fl">3165</span><span class="op">)</span></span>
<span></span>
<span><span class="va">regions_and_dat</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">regions</span>, <span class="va">dat_3165_mean</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"maakunta_code"</span> <span class="op">=</span> <span class="st">"region.code"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Teemakartta ggplotilla</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">regions_and_dat</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">mean_cases_per_annum</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"white"</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="va">dat_3165_meta</span><span class="op">$</span><span class="va">title</span><span class="op">$</span><span class="va">fi</span>, subtitle <span class="op">=</span> <span class="st">"Vuosien 2000-2021 keskiarvo"</span>, color <span class="op">=</span> <span class="st">""</span>, caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>    <span class="st">"Datan lähde: https://sotkanet.fi / "</span>, <span class="va">dat_3165_meta</span><span class="op">$</span><span class="va">organization</span><span class="op">$</span><span class="va">title</span><span class="op">$</span><span class="va">fi</span>, <span class="st">"\n"</span>, <span class="st">"Datan päiväys: "</span>, <span class="va">dat_3165_meta</span><span class="op">$</span><span class="va">`data-updated`</span>, <span class="st">", Data ladattu: "</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># theme_void() +</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_fill_gradient2</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">""</span>, midpoint <span class="op">=</span> <span class="fl">4</span>, low <span class="op">=</span> <span class="st">"blue"</span>, mid <span class="op">=</span> <span class="st">"white"</span>, high <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutorial_fi_files/figure-html/sotkanet_syphilis_per_100k-1.png" width="700"></p>
<p>Lähdeviite alkuperäiseen, Sotkanet API:sta ladattuun dataan:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sotkanet_cite.html">sotkanet_cite</a></span><span class="op">(</span><span class="fl">3165</span><span class="op">)</span></span>
<span><span class="co">#&gt; @Misc{,</span></span>
<span><span class="co">#&gt;   title = {Kuppa-infektioita (syphilis) / 100 000 asukasta},</span></span>
<span><span class="co">#&gt;   url = {https://sotkanet.fi/sotkanet/fi/metadata/indicators/3165},</span></span>
<span><span class="co">#&gt;   organization = {Terveyden ja hyvinvoinnin laitos (THL)},</span></span>
<span><span class="co">#&gt;   year = {2024},</span></span>
<span><span class="co">#&gt;   urldate = {2024-07-15},</span></span>
<span><span class="co">#&gt;   type = {Dataset},</span></span>
<span><span class="co">#&gt;   note = {Accessed 2024-07-15, dataset last updated 2024-04-29},</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>THL:n CC BY 4.0 -lisenssin mukaisesti on myös hyvä mainita, että
datan perusteella laskettiin uusi, tapausten keskiarvoa kuvaava muuttuja
<code>mean_cases_per_annum</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="lisensointi-ja-viittaminen">Lisensointi ja viittaminen<a class="anchor" aria-label="anchor" href="#lisensointi-ja-viittaminen"></a>
</h2>
<div class="section level3">
<h3 id="sotkanetin-data">Sotkanetin data<a class="anchor" aria-label="anchor" href="#sotkanetin-data"></a>
</h3>
<p>Viittaa Sotkanetiin ja jaa linkki <a href="https://sotkanet.fi/sotkanet/fi/index" class="external-link">https://sotkanet.fi/sotkanet/fi/index</a>.
Muista myös mainita indikaattorin datan tuottaja (sarakkeesta
<code>indicator.organization.title</code>).</p>
<ul>
<li>
<a href="https://yhteistyotilat.fi/wiki08/display/THLKA/THL%3An+avoimen+datan+lisenssi+ja+vastuuvapauslauseke" class="external-link">THL:n
avoimen datan lisenssi ja vastuuvapauslauseke</a>.</li>
<li><a href="https://sotkanet.fi/sotkanet/fi/ohje/74" class="external-link">Sotkanet - Tietoa
palvelusta - Avoin rajapinta</a></li>
<li><a href="https://sotkanet.fi/sotkanet/fi/ohje/296" class="external-link">Sotkanet - Tietoa
palvelusta - Tietojen hyödyntäminen ja viittaus</a></li>
</ul>
<p>Keskeiset kohdat tiivistettynä:</p>
<ul>
<li>“Sotkanet REST API on tarkoitettu tietojen noutamiseen erissä niiden
jatkokäyttöä varten eri sovelluksissa. Rajapintaa ei ole tarkoitettu
suoraan, online käyttöön.”</li>
<li>“THL voi määrittelemänänsä hetkenä käynnistää palvelun uudelleen tai
sammuttaa sen huoltokatkoa varten. Huoltokatkoista ja muista
suunnitelluista katkoista pyritään tiedottamaan Sotkanetin kautta.
Käyttökatkoista ei ilmoiteta suoraan rajapinnan käyttäjille.”</li>
<li>“Sotkanetin rajapinnan kautta saatavia tietoja saa käyttää vapaasti
muiden järjestelmien tietopohjana.”</li>
<li>“Rajapintaa käytetään omalla vastuulla. THL tuottaa rajapinnan
sellaisenaan ilman takuita. THL pidättää oikeuden rajapinnan muutoksiin.
THL ei vastaa rajapintaa käyttävien sovellusten toiminnasta.”</li>
<li>THL:n itse tuottamia tilastotietoja ja indikaattoreita koskee THL:n
oma <a href="https://yhteistyotilat.fi/wiki08/display/THLKA/THL%3An+avoimen+datan+lisenssi+ja+vastuuvapauslauseke" class="external-link">avoimen
datan lisenssi ja vastuuvapauslauseke</a>. Mikäli data on jonkin toisen
organisaation, esimerkiksi Eurostatin, tuottama, tarkista datan
käyttöehdot kyseessä olevan organisaation omilta sivuilta.</li>
</ul>
<p><a href="https://sotkanet.fi/sotkanet/fi/ohje/296" class="external-link">Sotkanetin
käyttöohjeissa</a> annetaan seuraavanlainen viittausohje:</p>
<pre><code>Tilasto- ja indikaattoripankki Sotkanet. Terveyden ja hyvinvoinnin laitos. 0 - 17-vuotiaat lapset, joista on tehty lastensuojeluilmoitus, % vastaavan ikäisestä väestöstä (THL) (ind. 1086). Viitattu 10.6.2023.

Statistik- och indikatorbanken Sotkanet. Institutet för hälsa och välfärd. Psykiatriska specialiteternas öppenvårdsbesök / 1 000 invånare (ind. 1562). Hänvisning 10.6.2023.

Sotkanet Indicator Bank. Finnish Institute for Health and Welfare. Outpatient visits in specialities of psychiatry per 1000 inhabitants (ind. 1562). Referenced on 10 June 2023.</code></pre>
<p>Mikäli käytät viittausten hallinnassa bibtexiä ja julkaisun
viittausformaatti vaatii tietynlaista formaattia, yksittäisiin
indikaattoreihin viitatessa suosittelemme käyttämään apuna aiemmin tässä
artikkelissa demonstroitua <code><a href="../reference/sotkanet_cite.html">sotkanet_cite()</a></code>-funktiota.
Haluamme painottaa datalähteisiin viittaamisen tärkeyttä ja
suosittelemme perehtymään Data-asiain kansalliskomitean julkaisemaan
kansalliseen dataviittausten tiekarttaan (<a href="https://urn.fi/URN:NBN:fi-fe201804106446" class="external-link">Finnish Committee for
Research Data, 2018</a>), joka taas käyttää pohjana FORCE11 Joint
Declaration of Data Citation Principlesiä (<a href="https://doi.org/10.25490/a97f-egyk" class="external-link">Data Citation Synthesis Group,
2014</a>).</p>
</div>
<div class="section level3">
<h3 id="sotkanet-r-paketti">Sotkanet R-paketti<a class="anchor" aria-label="anchor" href="#sotkanet-r-paketti"></a>
</h3>
<p>Mikäli käytät julkaisussasi dataa jonka olet hakenut
sotkanet-pakettia käyttäen, toivomme että viittaat pakettiin seuraavalla
tavalla:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"sotkanet"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Kindly cite the sotkanet R package as follows:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Leo Lahti, Einari Happonen, Juuso Parkkinen, Joona Lehtomaki, Vesa</span></span>
<span><span class="co">#&gt;   Saaristo, Aleksi Lahtinen and Pyry Kantanen (rOpenGov 2024).</span></span>
<span><span class="co">#&gt;   sotkanet: Sotkanet Open Data Access and Analysis. R package version</span></span>
<span><span class="co">#&gt;   0.10.1 https://github.com/rOpenGov/sotkanet</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   @Misc{,</span></span>
<span><span class="co">#&gt;     title = {sotkanet: Sotkanet Open Data Access and Analysis},</span></span>
<span><span class="co">#&gt;     author = {Leo Lahti and Einari Happonen and Joona Lehtomäki and Juuso Parkkinen and Joona Lehtomaki and Vesa Saaristo and Pyry Kantanen and Aleksi Lahtinen},</span></span>
<span><span class="co">#&gt;     url = {https://github.com/rOpenGov/sotkanet},</span></span>
<span><span class="co">#&gt;     year = {2024},</span></span>
<span><span class="co">#&gt;     note = {R package version 0.10.1},</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Many thanks for all contributors!</span></span></code></pre></div>
<p>Tutkimuksessa käytettyihin ohjelmistoihin ja algoritmeihin
viittaaminen ja niiden relevanssin tunnistaminen ja tunnustaminen on
toisen FORCE11-julkaisun, FORCE11 Software Citation Principlesin (<a href="https://doi.org/10.7717/peerj-cs.86" class="external-link">Smith et al., 2016</a>),
mukaan tärkeää.</p>
</div>
</div>
<div class="section level2">
<h2 id="paketin-kehittäminen-vikojen-raportointi-ja-parannusehdotukset">Paketin kehittäminen, vikojen raportointi ja parannusehdotukset<a class="anchor" aria-label="anchor" href="#paketin-kehitt%C3%A4minen-vikojen-raportointi-ja-parannusehdotukset"></a>
</h2>
<p>Pakettia voi käyttää, muokata ja levittää vapaasti <a href="https://fi.wikipedia.org/w/index.php?title=BSD-lisenssi&amp;oldid=22409682#Kahden_ehdon_BSD-lisenssi" class="external-link">kahden
ehdon BSD-lisenssin</a> ehtojen mukaisesti.</p>
<p>Tunnistetut ja raportoidut bugit, puutteet ja muut rajoitteet on
listattu projektin <a href="https://github.com/rOpenGov/sotkanet/issues" class="external-link">GitHub-issueissa</a>.
Sivulla voi myös ilmoittaa uusista vioista ja antaa parannusehdotuksia.
Käyttäjien tekemät koodikontribuutiot ovat myös erittäin
tervetulleita.</p>
</div>
<div class="section level2">
<h2 id="istunnon-tiedot">Istunnon tiedot<a class="anchor" aria-label="anchor" href="#istunnon-tiedot"></a>
</h2>
<p>Tämä artikkeli luotiin seuraavalla laitteisto- ja
ohjelmistokokoonpanolla:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.4.1 (2024-06-14)</span></span>
<span><span class="co">#&gt; Platform: x86_64-pc-linux-gnu</span></span>
<span><span class="co">#&gt; Running under: Ubuntu 22.04.4 LTS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">#&gt; LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt;  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">#&gt;  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">#&gt;  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">#&gt; [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time zone: UTC</span></span>
<span><span class="co">#&gt; tzcode source: system (glibc)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt; [1] dplyr_1.1.4      geofi_1.0.15     ggplot2_3.5.1    kableExtra_1.4.0</span></span>
<span><span class="co">#&gt; [5] sotkanet_0.10.1 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] gtable_0.3.5       xfun_0.45          bslib_0.7.0        httr2_1.0.1       </span></span>
<span><span class="co">#&gt;  [5] htmlwidgets_1.6.4  tzdb_0.4.0         vctrs_0.6.5        tools_4.4.1       </span></span>
<span><span class="co">#&gt;  [9] generics_0.1.3     curl_5.2.1         proxy_0.4-27       tibble_3.2.1      </span></span>
<span><span class="co">#&gt; [13] fansi_1.0.6        highr_0.11         RefManageR_1.4.0   pkgconfig_2.0.3   </span></span>
<span><span class="co">#&gt; [17] KernSmooth_2.23-24 desc_1.4.3         lifecycle_1.0.4    compiler_4.4.1    </span></span>
<span><span class="co">#&gt; [21] farver_2.1.2       stringr_1.5.1      textshaping_0.4.0  munsell_0.5.1     </span></span>
<span><span class="co">#&gt; [25] class_7.3-22       htmltools_0.5.8.1  sass_0.4.9         yaml_2.3.9        </span></span>
<span><span class="co">#&gt; [29] pillar_1.9.0       pkgdown_2.1.0      jquerylib_0.1.4    classInt_0.4-10   </span></span>
<span><span class="co">#&gt; [33] cachem_1.1.0       tidyselect_1.2.1   digest_0.6.36      stringi_1.8.4     </span></span>
<span><span class="co">#&gt; [37] sf_1.0-16          purrr_1.0.2        labeling_0.4.3     bibtex_0.5.1      </span></span>
<span><span class="co">#&gt; [41] fastmap_1.2.0      grid_4.4.1         colorspace_2.1-0   cli_3.6.3         </span></span>
<span><span class="co">#&gt; [45] magrittr_2.0.3     utf8_1.2.4         httpcache_1.2.0    e1071_1.7-14      </span></span>
<span><span class="co">#&gt; [49] readr_2.1.5        withr_3.0.0        scales_1.3.0       backports_1.5.0   </span></span>
<span><span class="co">#&gt; [53] rappdirs_0.3.3     lubridate_1.9.3    timechange_0.3.0   rmarkdown_2.27    </span></span>
<span><span class="co">#&gt; [57] httr_1.4.7         ragg_1.3.2         hms_1.1.3          evaluate_0.24.0   </span></span>
<span><span class="co">#&gt; [61] knitr_1.48         viridisLite_0.4.2  frictionless_1.1.0 rlang_1.1.4       </span></span>
<span><span class="co">#&gt; [65] Rcpp_1.0.12        DBI_1.2.3          glue_1.7.0         xml2_1.3.6        </span></span>
<span><span class="co">#&gt; [69] svglite_2.1.3      rstudioapi_0.16.0  jsonlite_1.8.8     R6_2.5.1          </span></span>
<span><span class="co">#&gt; [73] plyr_1.8.9         units_0.8-5        systemfonts_1.1.0  fs_1.6.4</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Leo Lahti, Einari Happonen, Pyry Kantanen, Aleksi Lahtinen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>



    <!-- Add ropengov logo -->
  <script src="../BS5/logo.js"></script>
</body>
</html>
